<html>

<head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <style>
        body {
            padding: 0px;
            margin: 0px;
            font-family: Arial, Helvetica, sans-serif;
            color:white;
        }
        a:link,a:visited ,a:hover , a:active   {
            color: white;
            text-decoration: underline;
        }

        body, html {
                  height: 100%;
                }
            html, body {
                padding: 0px;
                margin: 0px;
                background: url('static/face_recognition.png');
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
                height: 100%;
                overflow-x: scroll;
            }

        .header {
            background-color: rgba(0, 0, 0, 0.3);
            font-weight: bold;
            text-transform: uppercase;
            font-size: large;
            color:white;

            text-align: center;
            padding: 30px;
        }
        .footer
        {

        }

        .info
        {
            text-align:left;
            color:gray;
            width:30%;
            margin:auto;
            padding:20px;
            font-size:14px;
        }


        .content {
            width: 100%;
        }

        .upload_part {
            background-color: rgba(0, 0, 0, 0.3);
            text-align: center;
            padding: 40px;
        }

        .upload_button {
            background-color: #FEED06;
            color: black;
            padding: 15px;
            font-size: 16px;
            border: 0px;
            border-radius: 5px;
            -webkit-box-shadow: 6px 8px 18px -5px rgba(0, 0, 0, 0.38);
            -moz-box-shadow: 6px 8px 18px -5px rgba(0, 0, 0, 0.38);
            box-shadow: 6px 8px 18px -5px rgba(0, 0, 0, 0.38);
            cursor: pointer;
        }

        .upload_hint {
            margin: 10px;
            font-size: 14px;
            color: rgb(200, 200, 200);
        }

        .result_part {
            text-align: center;
            padding: 40px;
        }

        .result_title {
            font-size: 18px;
            font-weight: bold;
        }
        .result_info {
            font-size:  900px;
            font-weight:  bold;
        }

        .result_id {
            padding: 10px;
            margin: 15px;
            font-size: 50px;
            font-weight:  bold;

        }

        .result_id_number {
            margin: 15px;
            padding: 10px;
            padding-left: 15px;
            padding-right: 15px;
            background-color: #FEED06;
            color: black;
            font-weight: bold;
            font-size: 18px;
            border-radius: 5px;

        }





    </style>
</head>

<body>
<div class='header'>
    HỆ THỐNG NHẬN DIỆN KHUÔN MẶT
</div>
<div class='content'>

    <div class='upload_part'>
        <button class='upload_button' id="upload_button">Chọn file ảnh...</button>
        <div class='upload_hint' id='upload_hint'>
            Các định dạng được hỗ trợ: PNG, JPG và JPEG
        </div>
        <form action="/" method="POST" enctype="multipart/form-data" id='form'>
            <input type="file" name="file" id="fileinput" accept="image/*" style="display:none">
        </form>
    </div>

    <div class='result_part'>
        <div class='result_title'><b>Kết quả nhận diện</b></div>
        <div class='result_id' id="result_info">_</div>
        <img style="max-width:300px; border-radius:1rem"
             src="https://reactnativecode.com/wp-content/uploads/2018/02/Default_Image_Thumbnail.png"
             alt="User Image" id="display_image">
    </div>
</div>
<div class='footer'>

</div>

</body>
<script>
    const basepredicts = tf.tensor([
      [
        0.049620121717453, -0.07921602576971054, 0.06902290135622025, 0.05115945264697075,
        -0.12771101295948029, -0.11424729973077774, 0.16421809792518616, -0.012448213063180447,
        -0.027273742482066154, -0.05676508694887161, 0.05701163783669472, -0.09826523065567017,
        0.001094536273740232, 0.041608672589063644, 0.12496639788150787, 0.06305642426013947,
        -0.13993270695209503, -0.16635705530643463, 0.14536066353321075, -0.029462259262800217,
        -0.002030929084867239, 0.002758263610303402, 0.008530630730092525, -0.027975672855973244,
        -0.014494023285806179, -0.015419707633554935, -0.034406878054142, 0.010411543771624565,
        -0.09309908002614975, 0.08366195857524872, 0.044526439160108566, -0.1520553082227707,
        -0.05519689992070198, -0.0862927958369255, 0.06769131124019623, -0.19288747012615204,
        -0.0936964750289917, -0.07860440015792847, 0.09637697041034698, -0.049866821616888046,
        -0.07274390757083893, -0.12297280877828598, -0.0886981263756752, 0.04734409600496292,
        0.1165134385228157, -0.08753584325313568, 0.05139107257127762, -0.004078170750290155,
        0.09136713296175003, 0.019880706444382668, -0.0159639623016119, 0.11878993362188339,
        -0.05661841109395027, -0.07766377180814743, 0.0002850654418580234, -0.05131181702017784,
        0.049027733504772186, -0.17773975431919098, 0.029642203822731972, -0.11965914070606232,
        0.032613687217235565, -0.12392782419919968, -0.13249678909778595, -0.09402746707201004,
        0.015246524475514889, -0.10788208991289139, -0.08419431746006012, -0.002792764687910676,
        -0.028201621025800705, -0.11975327879190445, -0.12004035711288452, 0.05930175259709358,
        0.09698136150836945, 0.0027784383855760098, -0.01918013207614422, -0.0739884153008461,
        -0.032922640442848206, -0.1291976124048233, -0.10312440991401672, -0.1010688841342926,
        0.030184296891093254, -0.08564622700214386, -0.05631716921925545, 0.08660232275724411,
        0.13393467664718628, 0.08883370459079742, -0.053212326020002365, 0.003715279744938016,
        0.14962108433246613, -0.027980169281363487, 0.09784036129713058, -0.009199387393891811,
        0.0010040008928626776, -0.03935960680246353, -0.040485210716724396, 0.10737409442663193,
        -0.05141954869031906, 0.111426942050457, 0.13445614278316498, 0.08183778077363968,
        0.002625263761729002, -0.12007814645767212, -0.002439426491037011, 0.14261262118816376,
        0.06725364178419113, -0.11890789866447449, -0.00610443064942956, 0.0015251532895490527,
        0.03612065315246582, 0.0745934471487999, -0.025855641812086105, 0.16758699715137482,
        0.0661446750164032, -0.08423326164484024, -0.04519374296069145, 0.057796940207481384,
        0.10605514049530029, 0.16241762042045593, -0.16434310376644135, 0.06740500777959824,
        0.05467234551906586, -0.021052338182926178, 0.022453518584370613, 0.10498014837503433,
        -0.021886784583330154, -0.013170021586120129, -0.24465958774089813, -0.15705162286758423,

      ],

      [
        0.0485566183924675, -0.08760096877813339, 0.05135307088494301, 0.04519534483551979,
    -0.10799067467451096, -0.12162892520427704, 0.15460677444934845, 0.004853467456996441,
    -0.0403011292219162, -0.06293749064207077, 0.05417653173208237, -0.10519593209028244,
    -0.02240569144487381, 0.03514378145337105, 0.12524735927581787, 0.06041193753480911,
    -0.15159906446933746, -0.15822537243366241, 0.15339645743370056, -0.045646678656339645,
    -0.00012452644295990467, 0.015193410217761993, 0.003360528964549303, -0.026571499183773994,
    -0.008505874313414097, -0.03019552119076252, -0.031604282557964325, 0.015507690608501434,
    -0.0908772423863411, 0.0740509107708931, 0.03608519583940506, -0.17028041183948517,
    -0.06954360008239746, -0.09074766933917999, 0.07447360455989838, -0.18325047194957733,
    -0.09548624604940414, -0.0742470771074295, 0.10970315337181091, -0.0443849191069603,
    -0.06052529811859131, -0.12264449894428253, -0.08666303008794785, 0.05077500268816948,
    0.11573055386543274, -0.09996790438890457, 0.04807325452566147, 0.003849602770060301,
    0.09278664737939835, 0.02434239163994789, -0.018767312169075012, 0.11293349415063858,
    -0.06745126843452454, -0.07871472835540771, -0.0038302678149193525, -0.049468327313661575,
    0.045711956918239594, -0.17530085146427155, 0.013316886499524117, -0.13536004722118378,
    0.046780917793512344, -0.12058839201927185, -0.1440352350473404, -0.08039616048336029,
    0.02730436623096466, -0.1021231859922409, -0.07402653247117996, -0.0064397817477583885,
    -0.0435553602874279, -0.11785775423049927, -0.13379569351673126, 0.0884157344698906,
    0.09226810932159424, 0.006467058323323727, -0.0296934824436903, -0.07373131811618805,
    -0.036676112562417984, -0.11888019740581512, -0.09418641775846481, -0.09104818105697632,
    0.04039378464221954, -0.0823415219783783, -0.0661177709698677, 0.07024350762367249,
    0.13784001767635345, 0.09293396025896072, -0.04111452400684357, 0.007791163865476847,
    0.15659891068935394, -0.03583594784140587, 0.09272748976945877, -0.023296764120459557,
    0.0028323796577751637, -0.03530355915427208, -0.04419489577412605, 0.08969086408615112,
    -0.04560743644833565, 0.10456325113773346, 0.13517139852046967, 0.08509913086891174,
    0.0034518467728048563, -0.12038733065128326, -0.008257169276475906, 0.1357305496931076,
    0.08458146452903748, -0.11320938169956207, -0.01535995863378048, -0.007014699280261993,
    0.021578822284936905, 0.05581752210855484, -0.025087252259254456, 0.1660829484462738,
    0.07998185604810715, -0.08299794048070908, -0.03913889825344086, 0.05296183377504349,
    0.09437143057584763, 0.1579352617263794, -0.16041386127471924, 0.07666200399398804,
    0.056581173092126846, -0.029270106926560402, 0.01914813742041588, 0.10795331746339798,
    -0.02250811457633972, -0.0006758649833500385, -0.24647223949432373, -0.15581929683685303
    ],

      [
        0.058527667075395584, -0.09156762808561325, 0.08646873384714127, 0.03390511870384216,
        -0.12305840104818344, -0.10290828347206116, 0.1652032881975174, -0.018684081733226776,
        -0.01646425761282444, -0.05653657019138336, 0.06984919309616089, -0.10799018293619156,
        0.009925860911607742, 0.057363979518413544, 0.12216464430093765, 0.05679933354258537,
        -0.14408746361732483, -0.17291519045829773, 0.14872969686985016, 0.00018844808801077306,
        -0.003530134679749608, 0.007252466399222612, -0.013789629563689232, -0.038715463131666183,
        -0.007194457575678825, 0.006408295128494501, -0.043265752494335175, 0.015564357861876488,
        -0.08484182506799698, 0.07628161460161209, 0.03529157489538193, -0.16665802896022797,
        -0.05616763234138489, -0.07882366329431534, 0.06164619326591492, -0.18862462043762207,
        -0.09336789697408676, -0.07278073579072952, 0.09998980909585953, -0.06945674121379852,
        -0.0740259513258934, -0.12168638408184052, -0.08886589854955673, 0.04180286079645157,
        0.11443985253572464, -0.08345577865839005, 0.05501844733953476, -0.007264121435582638,
        0.07581399381160736, -0.004460720345377922, -0.013759054243564606, 0.12286299467086792,
        -0.043083999305963516, -0.09462092816829681, -0.004743681754916906, -0.06397850066423416,
        0.06360219419002533, -0.168427512049675, 0.04036789387464523, -0.11354231834411621,
        0.017145391553640366, -0.12226620316505432, -0.13781392574310303, -0.08545103669166565,
        0.0041625602170825005, -0.10342199355363846, -0.07878221571445465, 0.0015386628219857812,
        -0.04766778275370598, -0.1256636530160904, -0.11124000698328018, 0.07182542234659195,
        0.10364770144224167, -0.021027427166700363, -0.02532701939344406, -0.06797222793102264,
        -0.05568131431937218, -0.12146566063165665, -0.09082478284835815, -0.10797175019979477,
        0.03687140718102455, -0.09894721210002899, -0.046457067131996155, 0.07408338785171509,
        0.13430514931678772, 0.07356655597686768, -0.0605187825858593, -0.0019010462565347552,
        0.15711382031440735, -0.022751368582248688, 0.09048576653003693, 0.02233329974114895,
        -0.0003931220271624625, -0.01600162498652935, -0.03751358762383461, 0.07766146212816238,
        -0.05874734744429588, 0.11141955852508545, 0.142800435423851, 0.06820301711559296,
        0.010257894173264503, -0.11827071011066437, 0.004088194575160742, 0.14593985676765442,
        0.06674693524837494, -0.11790560185909271, -0.017815234139561653, 0.013954873196780682,
        0.04937778040766716, 0.062203820794820786, -0.044181980192661285, 0.18191465735435486,
        0.05338387191295624, -0.08212384581565857, -0.0459815114736557, 0.049838241189718246,
        0.09738261997699738, 0.16095289587974548, -0.15353074669837952, 0.06993891298770905,
        0.042758964002132416, -0.027872741222381592, 0.022684045135974884, 0.11059016734361649,
        -0.013749810867011547, -0.026728680357336998, -0.24378810822963715, -0.16205182671546936
      ],

      [
        0.03604003041982651, -0.06709904968738556, 0.017309818416833878, 0.07656832039356232,
        -0.0808355063199997, -0.13059578835964203, 0.13676004111766815, 0.020164858549833298,
        -0.05451749265193939, -0.07422523945569992, 0.03136223927140236, -0.10459978878498077,
        -0.05054516717791557, 0.006654123775660992, 0.12942562997341156, 0.05582205206155777,
        -0.14823700487613678, -0.1381474733352661, 0.15202295780181885, -0.0975443422794342,
        0.004181769676506519, 0.04021614044904709, 0.023619432002305984, -0.000599728140514344,
        -0.027978435158729553, -0.07443690299987793, -0.01187602337449789, 0.007524975575506687,
        -0.08424462378025055, 0.0676686242222786, 0.038820091634988785, -0.15603525936603546,
        -0.07811205834150314, -0.10615266114473343, 0.08854386955499649, -0.18107104301452637,
        -0.08799374848604202, -0.07430494576692581, 0.09850431978702545, -0.013622229918837547,
        -0.0365341454744339, -0.10894185304641724, -0.08565603196620941, 0.06883475929498672,
        0.11513908207416534, -0.10201955586671829, 0.02891506999731064, 0.02004423178732395,
        0.10370026528835297, 0.06338594853878021, -0.012796030379831791, 0.09939712285995483,
        -0.09017334133386612, -0.05968596413731575, 0.005812322720885277, -0.03065517731010914,
        0.024245455861091614, -0.18926949799060822, -0.005309898406267166, -0.14910948276519775,
        0.07338818162679672, -0.12107942998409271, -0.1404922753572464, -0.07862617075443268,
        0.039924222975969315, -0.10159284621477127, -0.058304231613874435, -0.009198959916830063,
        -0.04108354076743126, -0.09994527697563171, -0.1591993123292923, 0.09383032470941544,
        0.09275609254837036, 0.03641483932733536, -0.0185883529484272, -0.09132412075996399,
        0.0033930325880646706, -0.13514618575572968, -0.10692143440246582, -0.07191238552331924,
        0.04749447852373123, -0.06521901488304138, -0.07738745212554932, 0.06775978952646255,
        0.14108458161354065, 0.10654907673597336, -0.028762727975845337, 0.009945862926542759,
        0.15119822323322296, -0.05373476445674896, 0.087594173848629, -0.06610611826181412,
        -0.0076247393153607845, -0.07076004147529602, -0.04912567883729935, 0.11289994418621063,
        -0.020601028576493263, 0.07976611703634262, 0.12141936272382736, 0.1104239672422409,
        -0.0108499675989151, -0.1345933973789215, -0.02638954669237137, 0.12716560065746307,
        0.08692999184131622, -0.09802812337875366, -0.00037827130290679634, -0.0370880551636219,
        0.007979401387274265, 0.05018250271677971, -0.006090512033551931, 0.12738037109375,
        0.111331507563591, -0.07982981950044632, -0.049679964780807495, 0.05958343297243118,
        0.07626307010650635, 0.15204772353172302, -0.1780228614807129, 0.06183457002043724,
        0.06787537783384323, -0.027378255501389503, 0.02223600074648857, 0.10322201251983643,
        -0.0521504171192646, 0.040650591254234314, -0.2254459708929062, -0.14115464687347412

      ],

      [
        0.05621548742055893, -0.09681876748800278, 0.08178717643022537, 0.03316798061132431,
        -0.1225297823548317, -0.10424549877643585, 0.16612812876701355, -0.014025522395968437,
        -0.018942054361104965, -0.05714688077569008, 0.0676465854048729, -0.10840712487697601,
        0.0076248967088758945, 0.053950075060129166, 0.12367523461580276, 0.05694685876369476,
        -0.14580784738063812, -0.17259791493415833, 0.14738956093788147, -0.00276864948682487,
        -0.0017278151353821158, 0.006973682902753353, -0.013516800478100777, -0.03751887381076813,
        -0.0034732366912066936, 0.0035900799557566643, -0.04246572032570839, 0.01651666685938835,
        -0.08398229628801346, 0.07529695332050323, 0.03275252878665924, -0.16742204129695892,
        -0.0588584803044796, -0.07981780171394348, 0.06478433310985565, -0.18997669219970703,
        -0.09528817236423492, -0.07284250855445862, 0.10590502619743347, -0.06440500915050507,
        -0.06970357894897461, -0.12474427372217178, -0.0870499461889267, 0.04294478893280029,
        0.11688397079706192, -0.08617950975894928, 0.056485481560230255, -0.0070968312211334705,
        0.07610274851322174, -0.002619361039251089, -0.01759922318160534, 0.12121584266424179,
        -0.04327086731791496, -0.09337662160396576, -0.0022046046797186136, -0.06014186516404152,
        0.06110929697751999, -0.17325866222381592, 0.03553912788629532, -0.1153678223490715,
        0.019683854654431343, -0.12352368235588074, -0.14174163341522217, -0.08309254795312881,
        0.008570442907512188, -0.10368030518293381, -0.07922045141458511, 0.0008774717571213841,
        -0.047593146562576294, -0.12299711257219315, -0.11296454817056656, 0.07203713059425354,
        0.09948618710041046, -0.018302304670214653, -0.025162050500512123, -0.06713041663169861,
        -0.05297240987420082, -0.12019798904657364, -0.09222231805324554, -0.10713643580675125,
        0.03489237651228905, -0.09474869817495346, -0.052891604602336884, 0.07435011863708496,
        0.13470400869846344, 0.07719913870096207, -0.056710097938776016, -0.00237106392160058,
        0.1550941914319992, -0.022308722138404846, 0.08856329321861267, 0.01725689135491848,
        0.003673677798360586, -0.015657469630241394, -0.03618941828608513, 0.07883859425783157,
        -0.056352417916059494, 0.11256000399589539, 0.14003606140613556, 0.07077886164188385,
        0.0069852108135819435, -0.1180204302072525, 0.0013427536468952894, 0.1403953582048416,
        0.06848493218421936, -0.11680218577384949, -0.017146611586213112, 0.012787645682692528,
        0.043812792748212814, 0.05904953554272652, -0.04059623181819916, 0.18108925223350525,
        0.05631719529628754, -0.0800217017531395, -0.04325094819068909, 0.046037156134843826,
        0.09921927005052567, 0.16225968301296234, -0.15336757898330688, 0.07290707528591156,
        0.04539383202791214, -0.028667451813817024, 0.02418842911720276, 0.11138470470905304,
        -0.012673263438045979, -0.022298024967312813, -0.24505724012851715, -0.1638156622648239
        ],
      [
        0.048395827412605286, -0.10022895783185959, 0.06231781840324402, 0.03452794626355171,
        -0.10870098322629929, -0.1159045472741127, 0.15953953564167023, 0.0010837976587936282,
        -0.03311524912714958, -0.057192519307136536, 0.05986206606030464, -0.10678698122501373,
        -0.01235190313309431, 0.046354856342077255, 0.12366684526205063, 0.061263833194971085,
        -0.15543021261692047, -0.16439667344093323, 0.15218937397003174, -0.025064773857593536,
        0.0012371625052765012, 0.0072793131694197655, -0.01041315495967865, -0.03761535882949829,
        0.0023261921014636755, -0.009981620125472546, -0.03762564808130264, 0.017491908743977547,
        -0.089698925614357, 0.07151392847299576, 0.030461056157946587, -0.1744062900543213,
        -0.07117217779159546, -0.08338913321495056, 0.0720592588186264, -0.1806991845369339,
        -0.09724902361631393, -0.07270049303770065, 0.11986894905567169, -0.05365409329533577,
        -0.06276822090148926, -0.12771795690059662, -0.08450031280517578, 0.04204326495528221,
        0.11766361445188522, -0.09964626282453537, 0.05825769901275635, -0.0050258333794772625,
        0.08210642635822296, 0.010037572123110294, -0.025237804278731346, 0.11537086218595505,
        -0.055464379489421844, -0.08944337069988251, -0.0029638144187629223, -0.05356937274336815,
        0.05147380754351616, -0.17348717153072357, 0.017375854775309563, -0.12884952127933502,
        0.03541197255253792, -0.12345635890960693, -0.14898574352264404, -0.08059023320674896,
        0.020580599084496498, -0.10275377333164215, -0.07973948866128922, -0.00650726119056344,
        -0.05279640853404999, -0.11934490501880646, -0.12067676335573196, 0.08289164304733276,
        0.08931323140859604, -0.006750273052603006, -0.03256741911172867, -0.06741824746131897,
        -0.04706566035747528, -0.10975653678178787, -0.08812402188777924, -0.09442200511693954,
        0.04127154499292374, -0.08710029721260071, -0.06221383810043335, 0.06654922664165497,
        0.13606391847133636, 0.08569462597370148, -0.04412248358130455, 0.0073617491871118546,
        0.16008569300174713, -0.027760988101363182, 0.0878283828496933, -0.004437967203557491,
        0.009338240139186382, -0.017359193414449692, -0.03766876831650734, 0.07792432606220245,
        -0.0538310706615448, 0.11034312844276428, 0.13659138977527618, 0.0750163123011589,
        0.00483641168102622, -0.11317820847034454, -0.0035158495884388685, 0.13719290494918823,
        0.08426076173782349, -0.11333471536636353, -0.022039789706468582, 0.0057892026379704475,
        0.026695331558585167, 0.053135909140110016, -0.029264213517308235, 0.1762014925479889,
        0.06950931996107101, -0.07902027666568756, -0.0325128436088562, 0.040615834295749664,
        0.10109228640794754, 0.1618310660123825, -0.1504998356103897, 0.0827178880572319,
        0.050347983837127686, -0.03386245295405388, 0.020144518464803696, 0.1124207079410553,
        -0.014544378034770489, -0.01120572630316019, -0.25067979097366333, -0.16143912076950073

      ],
      [
        0.06282473355531693, -0.08155176788568497, 0.1005093902349472, 0.039979059249162674,
        -0.13649004697799683, -0.0983383059501648, 0.16824065148830414, -0.03312714025378227,
        -0.008352735079824924, -0.05341339856386185, 0.07114409655332565, -0.10477637499570847,
        0.024295110255479813, 0.058147307485342026, 0.11905927211046219, 0.0576777309179306,
        -0.1316513568162918, -0.18151883780956268, 0.14244186878204346, 0.011662183329463005,
        -0.007403042167425156, 0.0012835318921133876, -0.013400904834270477, -0.03602565452456474,
        -0.01205474603921175, 0.014204433187842369, -0.04394159093499184, 0.010289632715284824,
        -0.08278840780258179, 0.07816231995820999, 0.041544731706380844, -0.15235979855060577,
        -0.04229271411895752, -0.07760129868984222, 0.053775329142808914, -0.1956419199705124,
        -0.09150724858045578, -0.07294987887144089, 0.09092239290475845, -0.07167907059192657,
        -0.0809006318449974, -0.1223989874124527, -0.0904228538274765, 0.037236858159303665,
        0.11449535191059113, -0.07183096557855606, 0.05768531188368797, -0.01126326434314251,
        0.07678759843111038, -0.008122521452605724, -0.013003144413232803, 0.1244186982512474,
        -0.03468997776508331, -0.0930333063006401, -0.0031097985338419676, -0.06650422513484955,
        0.06464027613401413, -0.1691342443227768, 0.05336301401257515, -0.101931631565094,
        0.006665819324553013, -0.12456010282039642, -0.13183444738388062, -0.09163720905780792,
        -0.004245842341333628, -0.10727643221616745, -0.0824572890996933, 0.0025759555865079165,
        -0.03503700718283653, -0.12568187713623047, -0.10380512475967407, 0.05344129726290703,
        0.10963282734155655, -0.02333262376487255, -0.01705988496541977, -0.06931134313344955,
        -0.05336567014455795, -0.13070017099380493, -0.09999299794435501, -0.1126987561583519,
        0.03171158209443092, -0.10068752616643906, -0.03915597125887871, 0.08301364630460739,
        0.13143761456012726, 0.0708971917629242, -0.06941408663988113, -0.005070401821285486,
        0.15033017098903656, -0.014404687099158764, 0.09556230902671814, 0.03422502428293228,
        -0.004062928259372711, -0.020503230392932892, -0.036285530775785446, 0.08936773985624313,
        -0.058067694306373596, 0.11254999786615372, 0.14327634871006012, 0.06470523029565811,
        0.006064590997993946, -0.11601255089044571, 0.011002077721059322, 0.14477334916591644,
        0.0539434589445591, -0.12144263833761215, -0.010967258363962173, 0.016592441126704216,
        0.05852237716317177, 0.07479161024093628, -0.04612221568822861, 0.18141227960586548,
        0.047746844589710236, -0.08278875052928925, -0.05173821002244949, 0.05787678062915802,
        0.10006318241357803, 0.15892966091632843, -0.15774288773536682, 0.06354976445436478,
        0.04554729908704758, -0.021644383668899536, 0.025820201262831688, 0.10923906415700912,
        -0.012134160846471786, -0.034267839044332504, -0.2396988719701767, -0.1591528207063675
      ]

    ]);
    labels = [
      "Đặng Nguyễn Anh Tuấn",
      "Đinh Xuân Vũ",
      "Đỗ Mạnh Quân",
      "Nguyễn Anh Tuấn",
      "Nguyễn Duy Phúc",
      "Ngô Hồng Quang",
      "Nguyễn Thành Vinh",
    ];



    // Load model
     $("document").ready (async function() {
        model = await tf.loadLayersModel('./static/tfjs_model/model.json');
        console.log('Succeeded');
        console.log(model.summary());
    });

    $("#upload_button").click(function() {
        $("#fileinput").trigger('click');
    });

    async function predict() {
      // 1. Chuyen anh ve tensor
      let image = document.getElementById("display_image");
      let img = tf.browser.fromPixels(image);
      let tensor = img
        .resizeNearestNeighbor([224, 224])
        .toFloat()
        .expandDims();

      // 2. Predict
      let predictions = await model.predict(tensor);

      function getMin(predict) {
        return predict
          .squaredDifference(basepredicts)
          .mean((axis = 1))
          .argMin()
          .arraySync();
      }

      // Tính L2 và lấy max
      const predictId = getMin(predictions);

      // Lấy nhãn dựa trên index ở bước trên
      const result = labels[predictId];

      // In kết quả
      $("#result_info").empty();
      $("#result_info").append(result);
    }

    $("#fileinput").change(function () {
      let reader = new FileReader();
      reader.onload = function () {
        let dataURL = reader.result;

        imEl = document.getElementById("display_image");
        imEl.onload = function () {
          predict();
        };
        $("#display_image").attr("src", dataURL);
        $("#result_info").empty();
      };

      let file = $("#fileinput").prop("files")[0];
      reader.readAsDataURL(file);
    });
  </script>
</html>
